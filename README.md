# بات تلگرام ثبت آگهی فروش

این بات امکان ثبت آگهی‌های فروش با لینک گیفت تلگرام را فراهم می‌کند.

## ویژگی‌ها

### ویژگی‌های اصلی
- ✅ ثبت آگهی با لینک گیفت تلگرام
- ✅ تعیین قیمت (عدد یا متن)
- ✅ پرداخت خودکار با استارز تلگرام
- ✅ تایید آگهی توسط ادمین
- ✅ ارسال خودکار آگهی تایید شده به کانال
- ✅ ذخیره اطلاعات کاربران در دیتابیس
- ✅ تگ تبلیغاتی در انتهای آگهی
- ✅ پشتیبانی از چند زبان (فارسی، انگلیسی، روسی)

### سیستم مدیریت
- ✅ پنل سوپر ادمین با قابلیت‌های پیشرفته
- ✅ مدیریت کاربران (جستجو، مشاهده اطلاعات)
- ✅ آمار تفصیلی (کل کاربران، آگهی‌ها، درآمد)
- ✅ سیستم بازپرداخت ستاره‌ها
- ✅ سیستم پشتیبانی داخلی

### سیستم ضد اسپم
- ✅ محدودیت زمانی بین ثبت آگهی‌ها (30 ثانیه)
- ✅ محدودیت تعداد آگهی روزانه (5 آگهی)
- ✅ محدودیت درخواست‌های پشتیبانی (3 درخواست در ساعت)
- ✅ فاصله زمانی بین درخواست‌های پشتیبانی (60 ثانیه)
- ✅ پیام‌های خطای مناسب برای کاربران

## نصب و راه‌اندازی

### 1. نصب وابستگی‌ها

```bash
pip install -r requirements.txt
```

### 2. تنظیم فایل .env

فایل `.env` را ویرایش کرده و مقادیر زیر را وارد کنید:

```env
# اطلاعات بات
BOT_TOKEN=توکن_بات_شما
SUPER_ADMIN_ID=آیدی_عددی_سوپر_ادمین
SUPPORT_ADMIN_ID=آیدی_عددی_ادمین_پشتیبانی
CHANNEL_ID=@نام_کاربری_کانال
CHANNEL_NAME=نام کانال شما

# تنظیمات پرداخت
STARS_AMOUNT=1

# تنظیمات ضد اسپم
AD_COOLDOWN_SECONDS=30
AD_DAILY_LIMIT=5
SUPPORT_COOLDOWN_SECONDS=60
SUPPORT_HOURLY_LIMIT=3

# سایر تنظیمات...
```

### 3. راه‌اندازی بات

```bash
python main.py
```

## نحوه استفاده

### برای کاربران:
1. `/start` - شروع کار با بات و انتخاب زبان
2. کلیک روی "ثبت آگهی جدید"
3. ارسال لینک گیفت تلگرام
4. وارد کردن قیمت
5. پرداخت هزینه با استارز
6. انتظار برای تایید ادمین
7. استفاده از بخش "پشتیبانی" برای ارسال پیام به ادمین

### برای سوپر ادمین:
1. `/admin` - دسترسی به پنل مدیریت
2. مشاهده و مدیریت آگهی‌های در انتظار تایید
3. مشاهده آمار تفصیلی سیستم
4. مدیریت کاربران (جستجو، مشاهده اطلاعات)
5. بازپرداخت ستاره‌ها
6. پاسخ به درخواست‌های پشتیبانی

### برای ادمین پشتیبانی:
1. دریافت و پاسخ به پیام‌های پشتیبانی کاربران
2. مدیریت درخواست‌های پشتیبانی

## ساختار فایل‌ها

- `main.py` - فایل اصلی بات و منطق اصلی
- `database.py` - مدیریت دیتابیس و عملیات CRUD
- `translations.py` - ترجمه‌ها و متن‌های چندزبانه
- `.env` - تنظیمات محیطی و پیکربندی
- `.env.example` - نمونه فایل تنظیمات
- `requirements.txt` - وابستگی‌های پروژه
- `ads_bot.db` - فایل دیتابیس (خودکار ایجاد می‌شود)
- `README_ADMIN_ROLES.md` - راهنمای نقش‌های مدیریتی

## تنظیمات ضد اسپم

محدودیت‌های زیر قابل تنظیم در فایل `.env` هستند:

- `AD_COOLDOWN_SECONDS`: فاصله زمانی بین ثبت آگهی‌ها (پیش‌فرض: 30 ثانیه)
- `AD_DAILY_LIMIT`: حداکثر تعداد آگهی در روز (پیش‌فرض: 5)
- `SUPPORT_COOLDOWN_SECONDS`: فاصله زمانی بین درخواست‌های پشتیبانی (پیش‌فرض: 60 ثانیه)
- `SUPPORT_HOURLY_LIMIT`: حداکثر درخواست پشتیبانی در ساعت (پیش‌فرض: 3)

## نکات مهم

1. حتماً بات را در کانال مورد نظر ادمین کنید
2. آیدی عددی سوپر ادمین و ادمین پشتیبانی را در فایل .env وارد کنید
3. مقدار استارز و محدودیت‌های ضد اسپم قابل تنظیم هستند
4. تمام پیام‌ها قابل شخصی‌سازی در فایل .env هستند
5. بات از سه زبان فارسی، انگلیسی و روسی پشتیبانی می‌کند
6. سیستم ضد اسپم به صورت خودکار محدودیت‌ها را اعمال می‌کند

## امنیت

- هرگز فایل `.env` را در گیت کامیت نکنید
- توکن بات را محرمانه نگه دارید
- فقط سوپر ادمین مجاز به دسترسی کامل سیستم است
- سیستم ضد اسپم از سوءاستفاده کاربران جلوگیری می‌کند
- تمام اطلاعات کاربران به صورت امن در دیتابیس ذخیره می‌شوند